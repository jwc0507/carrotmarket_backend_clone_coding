
# 땅근마켓

***
## 1. 프로젝트 소개
***

![](https://velog.velcdn.com/images/lries7897/post/fdd37f1e-20ea-4810-84f6-b5bdf47bac7d/image.png)


- 실제 서비스 되고 있는 당근마켓을 클론 코딩하여 구현해 본 사이트 입니다.

프로젝트 데모영상 : [추후 넣을 예정](https://youtu.be/BmB7c9jov54)

웹 사이트 링크 : [땅근마켓](http://1336.s3-website.ap-northeast-2.amazonaws.com/)

***

## 2. 프로젝트 개요
***

#### 제작팀

- FE : 김동엽, 이예솔, 엄주영
- BE : 이승환, 김범석, 최진원

#### 제작기간 : 22.09.09 ~ 22.09.15 (6일)

***

## 3. 설계
***
 
###  와이어 프레임
 ![](https://velog.velcdn.com/images/lries7897/post/ba7a3f77-9d8c-420a-80f6-f49d5ccceb85/image.png)

### API 설계

| 데이터 테이블 | 기능                                       | Method | URL                          | request                                                                                          | response                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | 비고                                                                                                                                                         |
|---------------|--------------------------------------------|--------|------------------------------|--------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 회원정보      | 회원가입                                   | POST   | /api/member/signup           | {”phoneNumber” : “01000000000”,”nickname” : “닉네임”,”address” ; “주소”,”password” : “비밀번호”} | {‘success’: true,’data’ : nickname+‘님 회원가입 성공’”error” : null}OR{‘success’: false,’code’ : ‘SIGNUP_FAILED’’message’:’회원가입 실패’}                                                                                                                                                                                                                                                                                                                                                                                 | 프론트와 협의 후 주소 api를 활용해 주소값을 받아오는 방식대신 직접 주소를 받는 방식을 사용하기로 함.기 생성된 아이디 들에는 임의로 주소값을 넣어주기로 함.   |
|               | 로그인                                     | POST   | /api/member/login            | {”phoneNumber” : “01000000000”,”password” : “비밀번호”}                                          | {'success':true, ’data’ : 로그인한계정의 닉네임”error” : null}OR{‘success’: false,’code’ : “LOGIN_FAILED’message:’로그인 실패’}                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                              |
|               | 전화번호 중복 검사                         | POST   | /api/member/chkPhonenum      | {”value” : “000000000”}                                                                          | {'success':true, ’data’ :’사용가능한 번호입니다.’”error” : null}OR{‘success’: false,’code’ : “PHONE_NUMBER_DUPLICATE’message:’번호 중복’}                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                              |
|               | 닉네임 중복 검사                           | POST   | /api/member/chkNickname      | {”value” : “닉네임”}                                                                             | {'success':true, data :’사용가능한 닉네임입니다.’”error” : null}OR{‘success’: false,’code’ : “NICKNAME_DUPLICATE’’message’:’닉네임 중복’}                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                              |
|               | 주소등록                                   | POST   | /api/member/address          | {”address” : 주소}                                                                               | {'success':true, data :’ message : “주소설정이 완료되었습니다. ”address” : “입력된 주소””error” : null}                                                                                                                                                                                                                                                                                                                                                                                                                    | 회원가입 프로세스 분석을 해보니주소등록이 검색기능임.검색 후 주소를 가지고 있다가 회원가입할때 추가로 넣어줘서 정보를 저장하는 것으로 보임.                  |
|               | 로그아웃                                   | POST   | /api/member/logout           |                                                                                                  | {'success':true, data : ’로그아웃 완료.’”error” : null}                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                              |
|               |                                            |        |                              |                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                              |
| 게시글페이지  | 게시글 작성                                | POST   | /api/post                    | {”title” : 제목,”price” : 가격,”imageUrl” : 사진,”category” : 카테고리,”content” : 내용}         | {'success':true, data : {”id” : “글 아이디””temperature” :  “매너온도””title” : “글제목1”,”status” : “상품상태””category” : “카테고리””nickname” : “닉네임”,”address” : “주소””imgUrl” : “사진1”,”price” : ”가격1”,”content”  : “내용””numOfChat” : “채팅방 갯수1”,”numOfWish” : “관심상품누른사람수1”}”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’글 작성 오류.“}                                                                                                                               | 유저객체 {id : 유저아이디,nickName : 닉네임,temperature : 온도,address : 주소1}                                                                              |
|               | 게시글 수정                                | PUT    | /api/post/{id}               | {”title” : 제목,”price” : 가격,”imageUrl” : 사진,”category” : 카테고리,”content” : 내용}         | {'success':true, data : {”id” : “글 아이디””temperature” :  “매너온도””title” : “글제목1”,”status” : “상품상태””category” : “카테고리””nickname” : “닉네임”,”address” : “주소””imgUrl” : “사진1”,”price” : ”가격1”,”content”  : “내용””numOfChat” : “채팅방 갯수1”,”numOfWish” : “관심상품누른사람수1”}”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’글 수정 오류.“}                                                                                                                               | id는 게시글 아이디                                                                                                                                           |
|               | 게시글 삭제                                | DELETE | /api/post/{id}               |                                                                                                  | {'success':true, data :  “글 삭제 완료””error” : null}OR{‘success’: false,’code’ : “DELETE_FAILED”’message’:’ ’글 삭제에 실패하였습니다.“}                                                                                                                                                                                                                                                                                                                                                                                 | id는 게시글 아이디                                                                                                                                           |
|               | 게시글조회                                 | GET    | /api/view/post/{id}          |                                                                                                  | {'success':true, data : {”id” : “글 아이디”,”sellerId” : “판매자 아이디”,”temperature” :  “매너온도””title” : “글제목1”,”status” : “상품상태””category” : “카테고리””nickname” : “닉네임”,”address” : “주소””imgUrl” : “사진1”,”price” : ”가격1”,”content”  : “내용””numOfChat” : “채팅방 갯수1”,”numOfWish” : “관심상품누른사람수1”}”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’글 조회 오류.“}                                                                                                 | 상품상태 : 판매완료, 예약중. 판매중,나눔완료id는 게시글 아이디나눔은 가격 0으로 요청                                                                         |
|               | 게시글 전체조회                            | GET    | /api/view/post               |                                                                                                  | {'success':true, data : totalpostlist : [{”id” : “글 아이디””title” : “글제목1”,”imgUrl” : “사진1”,”price” : ”가격1”,”numOfChat” : “채팅방 갯수1”,”numOfWish” : “관심상품누른사람수1”},{”id” : “글 아이디””title” : “글제목2”,”imgUrl” : “사진2”,”price” : ”가격2”,”numOfChat” : “채팅방 갯수2”,”numOfWish” : “관심상품누른사람수2”}]”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’글 전체 조회 오류.“}                                                                                            | 카테고리 일단 정한것.1가전,   2가구, 3생활, 4도서, 5의류,  6스포츠, 7티켓, 8미용, 9기타, 10삽니다, 11디지털,  12인테리어,  13주방                            |
|               | 사진 업로드                                | POST   | /api/post/image              | *form-data{key:image,value:사진파일}                                                             | {'success':true, data :{”imageUrl” : “이미지 url”}”error” : null}OR{‘success’: false,’code’ : “UPLOAD_FAIL”’message’:’ ’업로드에 실패하였습니다.“}                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                              |
|               | 수정사진 업로드                            | PUT    | /api/post/image/{id}         | *form-data{key:image,value:사진파일}                                                             | {'success':true, data :{”imageUrl” : “이미지 url”}”error” : null}OR{‘success’: false,’code’ : “UPLOAD_FAIL”’message’:’ ’업로드에 실패하였습니다.“}                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                              |
|               | 상품상태변경 (판매중, 예약중)_             | PUT    | /api/post/status/{id}        | {”status” : “예약중”}                                                                            | {'success':true, data :{“바뀐상태”}”error” : null}                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | status : 판매중, 예약중거래자 없는데 거래완료로 바로 보내기 위한 버튼이 눌렸을때id는 게시글 아이디                                                           |
|               | 상품상태변경 (거래완료, 나눔완료)_         | PUT    | /api/post/status/done/{id}   | {”status” : “판매완료”}                                                                          | {'success':true, data :{“바뀐상태”}”error” : null}                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | status : 거래완료, 나눔완료거래자가 있을경우 누르는 버튼에 연결된 apiid는 채팅방 아이디실제 당근 거래를 할때 채팅한 채팅방을 선택한 뒤 거래완료를 누르게 됌. |
|               | 판매글id당 채팅방목록 조회                 | GET    | /api/post/getchatlist/{id}   |                                                                                                  | {”success” : true,”data” : {”roomId” : “채팅방아이디”,”roomName” : “방이름”,”buyerNickname”:””구매자닉네임”,”address” : “구매자주소”,”time” : 마지막 대화시간}}                                                                                                                                                                                                                                                                                                                                                            | id는 게시글id                                                                                                                                                |
|               | 관심상품 누르기                            | POST   | /api/addwishlist/{id}        |                                                                                                  | {'success':true, "data” :관심상품 추가가 완료되었습니다,””error” : null}OR{‘success’: false,’code’ : “UPLOAD_FAIL”’message’:’ ’업로드에 실패하였습니다.“}                                                                                                                                                                                                                                                                                                                                                                  | id는 게시글 아이디                                                                                                                                           |
|               | 관심상품 취소                              | POST   | /api/removewishlist/{id}     |                                                                                                  | {'success':true, "data” :관심상품 취소가 완료되었습니다,””error” : null}OR{‘success’: false,’code’ : “UPLOAD_FAIL”’message’:’ ’업로드에 실패하였습니다.“}                                                                                                                                                                                                                                                                                                                                                                  | id는 게시글 아이디                                                                                                                                           |
|               | 관심상품확인                               | GET    | /api/getwishlist/{id}        |                                                                                                  | {'success':true, "data” : true”error” : null}OR{‘success’: false,’code’ : “UPLOAD_FAIL”’message’:’ ’업로드에 실패하였습니다.“}                                                                                                                                                                                                                                                                                                                                                                                             | id는 게시글 아이디                                                                                                                                           |
|               | 판매자 상품 목록 조회                      | GET    | /api/view/sellerproduct/{id} |                                                                                                  | {'success':true, data : postlist : [{”id” : “글 아이디””title” : “글제목1”,”imgUrl” : “사진1”,”price” : ”가격1”,{”id” : “글 아이디””title” : “글제목2”,”imgUrl” : “사진2”,”price” : ”가격2”,}]”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’연관 조회 오류.“}                                                                                                                                                                                                                                      | 4개만id는 판매자아이디                                                                                                                                       |
|               | 연관 카테고리 상품 목록 조회               | GET    | /api/view/categorylist/{id}  |                                                                                                  | {'success':true, data : postlist : [{”id” : “글 아이디””title” : “글제목1”,”imgUrl” : “사진1”,”price” : ”가격1”,{”id” : “글 아이디””title” : “글제목2”,”imgUrl” : “사진2”,”price” : ”가격2”,}]”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’연관 조회 오류.“}                                                                                                                                                                                                                                      | 10개만id는 게시글아이디                                                                                                                                      |
|               |                                            |        |                              |                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                              |
| 마이페이지    | 닉네임 수정                                | PUT    | /api/user/nickname           | {”value” : 닉네임}                                                                               | {‘success’: true,’data’ : “수정 완료””error” : null}OR{‘success’: false,’code’ : ‘FAILED’’message’:’수정실패’}                                                                                                                                                                                                                                                                                                                                                                                                             | 닉네임수정및 주소수정은 유저객체의 내용이 바뀌므로 인증토큰이 유효하지 않게됨 그래서 새로운 토큰을 만들어 재발급했으니 헤더의 토큰 참조바람.                 |
|               | 주소 수정                                  | PUT    | /api/user/address            | {”value” : 주소}                                                                                 | {‘success’: true,’data’ :  “수정 완료””error” : null}OR{‘success’: false,’code’ : ‘FAILED’’message’:’수정실패’}                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                              |
|               | 회원정보 조회                              | GET    | /api/user                    |                                                                                                  | {‘success’: true,’data’ : {nickname: 닉네임,id: 1,temperature: 36.5,address: “주소”,numOfSale: 5}”error” : null}OR{‘success’: false,’code’ : ‘FAILED’’message’:’수정실패’}                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                              |
|               | 판매글 목록조회                            | GET    | /api/user/salespost/         |                                                                                                  | {'success':true, data : postlist : [{”id” : “글 아이디””title” : “글제목1”,”imgUrl” : “사진1”,”status” : “거래완료”,”price” : ”가격1”,”address” : “판매자주소”,”time” : 게시시간,”numOfChat” : 채팅방 갯수,”numOfWish” : 위시 갯수{”id” : “글 아이디””title” : “글제목2”,”imgUrl” : “사진2”,”status” : “거래완료”,”price” : ”가격2”,”address” : “판매자주소”,”time” : 게시시간,”numOfChat” : 채팅방 갯수,”numOfWish” : 위시 갯수}]”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’연관 조회 오류.“}  |                                                                                                                                                              |
|               | 구매글 목록조회                            | GET    | /api/user/purchasepost       |                                                                                                  | {'success':true, data : postlist : [{”id” : “글 아이디””title” : “글제목1”,”imgUrl” : “사진1”,”status” : “거래완료”,”price” : ”가격1”,”address” : “판매자주소”,”time” : 게시시간,”numOfChat” : 채팅방 갯수,”numOfWish” : 위시 갯수”{”id” : “글 아이디””title” : “글제목2”,”imgUrl” : “사진2”,”status” : “거래완료”,”price” : ”가격2”,”address” : “판매자주소”,”time” : 게시시간,”numOfChat” : 채팅방 갯수,”numOfWish” : 위시 갯수}]”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’연관 조회 오류.“} |                                                                                                                                                              |
|               | 관심상품 목록조회                          | GET    | /api/user/wishlist           |                                                                                                  | {'success':true, data : postlist : [{”id” : “글 아이디””title” : “글제목1”,”imgUrl” : “사진1”,”status” : “판매중”,”price” : ”가격1”,”address” : “판매자주소”,”time” : 게시시간,”numOfChat” : 채팅방 갯수,”numOfWish” : 위시 갯수”{”id” : “글 아이디””title” : “글제목2”,”imgUrl” : “사진2”,”status” : “거래완료”,”price” : ”가격2”,”address” : “판매자주소”,”time” : 게시시간,”numOfChat” : 채팅방 갯수,”numOfWish” : 위시 갯수}]”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’연관 조회 오류.“}   |                                                                                                                                                              |
|               |                                            |        |                              |                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                              |
| 채팅페이지    | 채팅방생성                                 | POST   | /api/chat/{id}               | {”roomName” : 방이름}                                                                            | {'success':true, data :{”roomId” : “생성된 채팅룸 아이디””name” : “채팅방이름””Member”: 맴버객체 내용”Post” : 게시글 내용}”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’채팅 생성 실패.“}                                                                                                                                                                                                                                                                                                          | 웹소켓 활용/ 프론트에게서 ws프로토콜로 요청값을 받아와야함.출력값은 수정이 필요함. 프론트에서 요청하는 값으로 변경                                           |
|               | 게시글에 있는 자신이 속한 채팅방 번호 찾기 | GET    | /api/chat/{id}               |                                                                                                  | {'success':true, data :{1}”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’채팅 불러오기 실패.“}                                                                                                                                                                                                                                                                                                                                                                                                      | id = 게시글 아이디출력값은 만약 자신이 게시글에 채팅방을 개설했다면 해당 채팅방의 번호를 알려줌.만약 개설된 채팅방이 없다면 0을 반환함.                      |
|               | 내 채팅방들 보기                           | GET    | /api/chat                    |                                                                                                  | {”success” : true,”data” : {”id” : “채팅방아이디”,”roomName” : “방이름”,”nickname” : 상대방 닉네임,”address” : 판매자의 거래 주소,”message” : 가장최근 메세지한개”lastTime” : 최근메세지가보내졋던시간}}                                                                                                                                                                                                                                                                                                                   | 구현완료/ 버그수정 완료                                                                                                                                      |
|               | 최근 채팅 메세지들 불러오기                | GET    | /api/chat/message/{id}       |                                                                                                  | {'success':true, data :{[{”type” : “판매자”, “nickname” : “닉네임” , ”message”: “안녕하세요},{”type” : “판매자”, “nickname” : “닉네임” , ”buyer” : “안녕하세요”},{”message” : “네고가능한가요?”}]}”error” : null}                                                                                                                                                                                                                                                                                                          | id = 채팅방 아이디                                                                                                                                           |
|               |                                            |        |                              |                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                              |
| 동네생활      | 게시글 작성                                | POST   | /api/townpost                | {”content” : 내용,”imageUrl” : 사진}                                                             | {'success':true, data : {”id” : “글 아이디””content” : “내용”,”nickname” : “닉네임”,”address” : “주소””imgUrl” : “사진1”time” : 시간”numOfComment” : 0}”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’글 작성 오류.“}                                                                                                                                                                                                                                                                               |                                                                                                                                                              |
|               | 게시글 목록 보기                           | GET    | /api/townpost                |                                                                                                  | 리스트반환{'success':true, data : {”id” : “글 아이디””content” : “내용”,”nickname” : “닉네임”,”address” : “주소””imgUrl” : “사진1,”time” : 시간”numOfComment” : 0}”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’글 작성 오류.“}                                                                                                                                                                                                                                                                    |                                                                                                                                                              |
|               | 게시글 상세보기                            | GET    | /api/townpoat/{id}           |                                                                                                  | {'success':true, data : {”id” : “글 아이디””content” : “내용”,”nickname” : “닉네임”,”address” : “주소””imgUrl” : “사진,”time” : 시간”numOfWatch” : “조회수””numOfComment” : 댓글수}”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’글 작성 오류.“}                                                                                                                                                                                                                                                   | id는 동네게시글 id                                                                                                                                           |
|               | 댓글 쓰기                                  | POST   | /api/towncomment/{id}        | {”content” : 내용}                                                                               | {'success':true, data : {”id” : “댓글 아이디”,”townPostId” : “동네 게시글 id””nickname” : “닉네임”,”address” : “주소”,”content” : “내용””time” : 시간}”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’글 작성 오류.“}                                                                                                                                                                                                                                                                                | id는 동네 게시글 id                                                                                                                                          |
|               | 댓글 목록가져오기                          | GET    | /api/towncomment/{id}        |                                                                                                  | 리스트 반환'success':true, data : {”id” : “댓글 아이디”,”townPostId” : “동네 게시글 id””nickname” : “닉네임”,”address” : “주소”,”content” : “내용””time” : 시간}”error” : null}OR{‘success’: false,’code’ : “BAD_REQUEST”’message’:’ ’글 작성 오류.“}                                                                                                                                                                                                                                                                      | id는 동네 게시글 id                                                                                                                                          |
|               |                                            |        |                              |                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                              |

*** 

## 4. 구현설명 및 트러블슈팅

***

### 주요 개발구현과 아쉬움

#### 웹소켓을 이용한 채팅 구현
당근마켓의 사용자 소통방식이자 중점기능이 사용자간 실시간 채팅 구현을 위해 웹 소켓을 활용하여 채팅을 구현함.
사용자간 실시간 채팅이 가능하며 여러 사용자가 각자 게시물당 한개의 방을 만들어 판매자와 소통을 할 수 있음.
채팅 내역은 항시 저장되므로 채팅방에 다시 접속하더라도 기존 채팅내역들을 확인 할 수 있음.

#### 여러개의 이미지 업로드 구현
프론트의 요청사항으로 여러개의 이미지를 한번에 받고 업로드 할 수 있는 기능(multiimage brench)을 구현하였지만 개발시간이 부족하여 실제로 사용을 하지는 못했음.
FE, BE간 FE안과 BE안에서의 소통이 중요함을 다시한번 인지.

#### api설계의 문제점
api설계가 초기보다 점점 불어남으로써 url만으로 어떤 기능을 가진 요청인지 이해하기 힘들어짐. 
api설계에 있어 조금더 겹치지 않는 url 설계및 어느상황에 쓰이는 메소드인지 명확한 주석달기가 필요하다고 생각함.


### 채팅방 관련 이슈

#### 채팅방 세션닫힘 에러
잘 동작하던 채팅방이 갑자기 closing session due to exception for standardwebsocketsession 을 반환하며 동작하지 않는 현상 발생.
로그확인 결과 채팅방에 입장한 사용자들을 관리하는 map에 이미 종료시킨 세션id가 남아있는 것을 확인
세션이 닫힐때 해당 세션id를 삭제하도록 조치.

#### 채팅방 목록 조회 관련 
처음에는 판매자 기준으로 조회를 하도록 로직을 짰으나 구매자일 경우에 채팅방이 조회 안되는 현상 발생 
판매자 기준, 구매자 기준으로 채팅방 목록 조회하도록 로직 변경 
판매자이면서 구매자인 경우(자기가 채팅방을 눌렀을때) 중복되는 현상 발생 ==> 중복이 되지 않도록 막아줌

#### 게시글 게시시간 및 채팅방 시간 관련 
기존에 LocalDateTime 으로 나오는 것을 ~분전 ~시간전 등으로 변경 
채팅방의 경우 메세지가 없을 경우 LOCALDATETIME_MIN으로 설정시 100만년 전이 나옴 
0초전으로 설정 

### 게시글 관련 이슈

#### 관심상품 카운팅
관심상품을 누를경우 판매게시글에 numOfWish가 업데이트 되지 않는 현상 확인 
연관메서드 설정으로 관심상품을 누를 시 판매 게시글 NumOfWish 업데이트 구현 

#### 게시판 CRUD 구현 
Dto를 활용한 데이터 처리 기법에 대한 몰이해 및 Lombok 어노테이션 사용법 미숙으로 인한 개발 지연.
팀원간의 구현기능 담당 재분배 및 빠른 피드백. Dto, annotation에 대한 자료 학습 및 well-made code를 참고하는 방식으로 사용법 재숙지.

### CORS관련 이슈

#### cors multidomain 
여러개의 도메인을 사용하려 했지만 맨 첫 도메인만 allow를 받게됨.
띄어쓰기를 해주니 제대로 동작함.
추가적으로 도메인들의 노출을 다시한번 막기위해 properties에 변수로 설정해 넣고 참조할 필요성이 보여짐.
